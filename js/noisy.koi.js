// jquery.noisy.js by Daniel Rapp - Version no. unknown - Minified 140312 by Ka of Isis
(function($){$.fn.noisy=function(options){options=$.extend({},$.fn.noisy.defaults,options);if(typeof options.color!=='undefined'){options.randomColors=false;}var uri,localStorageSupported,cachedUri=false;try{localStorageSupported=true;localStorage.setItem("test","");localStorage.removeItem("test");cachedUri = localStorage.getItem(window.JSON.stringify(options));}catch(e){localStorageSupported=false;}if(cachedUri && !options.disableCache){uri=cachedUri;}else{var canvas=document.createElement('canvas');if(!canvas.getContext){uri=options.fallback;}else{canvas.width=canvas.height=options.size;var ctx=canvas.getContext('2d'),imgData=ctx.createImageData(canvas.width,canvas.height),numPixels=Math.round(options.intensity*Math.pow(options.size,2)),maxAlpha=255*options.opacity;while (numPixels--){var x=~~(Math.random()*canvas.width),y=~~(Math.random()*canvas.height),index=(x+y*imgData.width)*4;if(options.randomColors){var colorChannel=numPixels % 255;if(options.colorChannels===parseInt(options.colorChannels)){colorChannel=numPixels % options.colorChannels;}else if($.isArray(options.colorChannels)){colorChannel=options.colorChannels[0]+(numPixels %(options.colorChannels[1]-options.colorChannels[0]));}imgData.data[index]=colorChannel;imgData.data[index+1] = options.monochrome ? colorChannel:~~(Math.random()*255);imgData.data[index+2] = options.monochrome ? colorChannel:~~(Math.random()*255);imgData.data[index+3]=~~(Math.random()*maxAlpha);}else{var rgb=hexToRgb(options.color);imgData.data[index]=rgb.r;imgData.data[index+1]=rgb.g;imgData.data[index+2]=rgb.b;imgData.data[index+3]=~~(Math.random()*maxAlpha);}}ctx.putImageData(imgData,0,0);uri=canvas.toDataURL('image/png');if(uri.indexOf('data:image/png')!=0){uri=options.fallback;}}if(window.JSON && localStorageSupported && !options.disableCache){try{localStorage.setItem(window.JSON.stringify(options),uri);}catch(e){console.warn(e.message);}}}function hexToRgb(hex){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result ?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null;}return this.each(function(){$(this).css('background-image',"url('"+uri+"'),"+$(this).css('background-image'));});};$.fn.noisy.defaults={intensity:0.9,size:200,opacity:0.08,fallback:'',monochrome:false,colorChannels:255,randomColors:true,disableCache:false};})(jQuery);